{"version":3,"sources":["BooksAPI.js","components/Book.js","components/BooksList.js","components/BookShelf.js","components/Home/index.js","components/Search/index.js","routes/index.js","App.js","index.js"],"names":["api","token","localStorage","Math","random","toString","substr","headers","Accept","Authorization","getAll","fetch","concat","then","res","json","data","books","update","book","shelf","id","method","Object","objectSpread","Content-Type","body","JSON","stringify","search","query","Book","handleChange","_ref","target","_this$props","_this","props","handleChangeShelf","value","BooksAPI","this","title","authors","_book$shelf","imageLinks","react_default","a","createElement","className","style","width","height","backgroundImage","thumbnail","onChange","disabled","join","replace","Component","BooksList","map","i","key","components_Book","BookShelf","loading","dist","color","size","length","components_BooksList","shelves","Home","components_BookShelf","filter","v","react_router_dom","to","Search","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","text","setState","searchBooks","searchedBooks","filterBooks","markShelf","find","_","o","state","prevProps","_this2","_this$state","_this$state2","type","placeholder","history","createBrowserHistory","Routes","getBooks","react_router","exact","path","render","components_Home","assign","components_Search","App","routes","React","ReactDOM","src_App_0","document","getElementById"],"mappings":"6QACMA,EAAM,wCAIRC,EAAQC,aAAaD,MACpBA,IACHA,EAAQC,aAAaD,MAAQE,KAAKC,SAASC,SAAS,IAAIC,QAAQ,IAElE,IAAMC,EAAU,CACdC,OAAU,mBACVC,cAAiBR,GAQNS,EAAS,kBACpBC,MAAK,GAAAC,OAAIZ,EAAJ,UAAiB,CAAEO,YACrBM,KAAK,SAAAC,GAAG,OAAIA,EAAIC,SAChBF,KAAK,SAAAG,GAAI,OAAIA,EAAKC,SAEVC,EAAS,SAACC,EAAMC,GAAP,OACpBT,MAAK,GAAAC,OAAIZ,EAAJ,WAAAY,OAAiBO,EAAKE,IAAM,CAC/BC,OAAQ,MACRf,QAAQgB,OAAAC,EAAA,EAAAD,CAAA,GACHhB,EADE,CAELkB,eAAgB,qBAElBC,KAAMC,KAAKC,UAAU,CAAER,YACtBP,KAAK,SAAAC,GAAG,OAAIA,EAAIC,UAERc,EAAS,SAACC,GAAD,OACpBnB,MAAK,GAAAC,OAAIZ,EAAJ,WAAkB,CACrBsB,OAAQ,OACRf,QAAQgB,OAAAC,EAAA,EAAAD,CAAA,GACHhB,EADE,CAELkB,eAAgB,qBAElBC,KAAMC,KAAKC,UAAU,CAAEE,YACtBjB,KAAK,SAAAC,GAAG,OAAIA,EAAIC,SAChBF,KAAK,SAAAG,GAAI,OAAIA,EAAKC,SCCRc,6MAnCbC,aAAe,SAAAC,GAAgB,IAAbC,EAAaD,EAAbC,OAAaC,EACOC,EAAKC,MAAjClB,EADqBgB,EACrBhB,KAAMmB,EADeH,EACfG,kBACRlB,EAAQc,EAAOK,MACrBC,EACUrB,EAAMC,GACbP,KAAK,kBAAMyB,GAAqBA,+EAG5B,IACCnB,EAASsB,KAAKJ,MAAdlB,KACAuB,EAA+CvB,EAA/CuB,MAAOC,EAAwCxB,EAAxCwB,QAFRC,EAEgDzB,EAA/BC,aAFjB,IAAAwB,EAEyB,OAFzBA,EAEiCC,EAAe1B,EAAf0B,WACxC,OACEC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,QACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,YACbH,EAAAC,EAAAC,cAAA,OACEC,UAAU,aACVC,MAAO,CAAEC,MAAO,IAAKC,OAAQ,IAAKC,gBAAe,QAAAzC,OAAUiC,EAAWS,UAArB,SAEnDR,EAAAC,EAAAC,cAAA,OAAKC,UAAU,sBACbH,EAAAC,EAAAC,cAAA,UAAQT,MAAOnB,EAAOmC,SAAUd,KAAKT,cACnCc,EAAAC,EAAAC,cAAA,UAAQT,MAAM,OAAOiB,UAAQ,GAA7B,cACAV,EAAAC,EAAAC,cAAA,UAAQT,MAAM,oBAAd,qBACAO,EAAAC,EAAAC,cAAA,UAAQT,MAAM,cAAd,gBACAO,EAAAC,EAAAC,cAAA,UAAQT,MAAM,QAAd,QACAO,EAAAC,EAAAC,cAAA,UAAQT,MAAM,QAAd,WAINO,EAAAC,EAAAC,cAAA,OAAKC,UAAU,cAAcP,GAC7BI,EAAAC,EAAAC,cAAA,OAAKC,UAAU,gBAAwBN,EAlClCc,KAAK,MAAMC,QAAQ,cAAe,iBAG5BC,aCcJC,EAlBG,SAAAvB,GAAS,IACjBpB,EAA6BoB,EAA7BpB,MAAOqB,EAAsBD,EAAtBC,kBACf,OACEQ,EAAAC,EAAAC,cAAA,MAAIC,UAAU,cACXhC,EAAM4C,IAAI,SAAC1C,EAAM2C,GAChB,OACEhB,EAAAC,EAAAC,cAAA,MAAIe,IAAKD,GACPhB,EAAAC,EAAAC,cAACgB,EAAD,CACE7C,KAAMA,EACNmB,kBAAmBA,iBCelB2B,EAvBG,SAAA5B,GAAS,IACjBK,EAA6CL,EAA7CK,MAAOzB,EAAsCoB,EAAtCpB,MAAOiD,EAA+B7B,EAA/B6B,QAAS5B,EAAsBD,EAAtBC,kBAC/B,OACEQ,EAAAC,EAAAC,cAAA,OAAKC,UAAU,aACbH,EAAAC,EAAAC,cAAA,MAAIC,UAAU,mBAAmBP,GACjCI,EAAAC,EAAAC,cAAA,OAAKC,UAAU,mBACZiB,EACCpB,EAAAC,EAAAC,cAACmB,EAAA,EAAD,CAAMC,MAAM,UAAUC,KAAM,KAE1BpD,EAAMqD,OAAS,EACbxB,EAAAC,EAAAC,cAACuB,EAAD,CACEtD,MAAOA,EACPqB,kBAAmBA,IAGnBQ,EAAAC,EAAAC,cAAA,KAAGC,UAAU,YAAb,qDCfVuB,EAAU,CACd,CACET,IAAK,mBACLrB,MAAO,qBAET,CACEqB,IAAK,aACLrB,MAAO,gBAET,CACEqB,IAAK,OACLrB,MAAO,SAkCI+B,EA9BF,SAAApC,GAAS,IACZpB,EAAsCoB,EAAtCpB,MAAOiD,EAA+B7B,EAA/B6B,QAAS5B,EAAsBD,EAAtBC,kBACxB,OACEQ,EAAAC,EAAAC,cAAA,OAAKC,UAAU,cACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,oBACbH,EAAAC,EAAAC,cAAA,sBAEFF,EAAAC,EAAAC,cAAA,OAAKC,UAAU,sBACbH,EAAAC,EAAAC,cAAA,WACGwB,EAAQX,IAAI,SAAAzC,GAAK,OAChB0B,EAAAC,EAAAC,cAAC0B,EAAD,CACEX,IAAK3C,EAAM2C,IACXG,QAASA,EACTxB,MAAOtB,EAAMsB,MACbJ,kBAAmBA,EACnBrB,MAAOA,EAAM0D,OAAO,SAAAC,GAAC,OAAIA,EAAExD,QAAUA,EAAM2C,YAKnDjB,EAAAC,EAAAC,cAAA,OAAKC,UAAU,uBACbH,EAAAC,EAAAC,cAAC6B,EAAA,EAAD,CACEC,GAAG,UACH7B,UAAU,oCCgEL8B,cAlGb,SAAAA,EAAY1C,GAAO,IAAAD,EAAA,OAAAb,OAAAyD,EAAA,EAAAzD,CAAAkB,KAAAsC,IACjB3C,EAAAb,OAAA0D,EAAA,EAAA1D,CAAAkB,KAAAlB,OAAA2D,EAAA,EAAA3D,CAAAwD,GAAAI,KAAA1C,KAAMJ,KAQRL,aAAe,SAAAC,GAAgB,IACvBmD,EADuBnD,EAAbC,OACIK,MACpBH,EAAKiD,SAAS,CAAED,SACZA,GACFhD,EAAKkD,YAAYF,IAbFhD,EAiBnBkD,YAAc,SAACF,GACbhD,EAAKiD,SAAS,CAAEnB,SAAS,IACzB1B,EACU4C,GACPvE,KAAK,SAAAC,GAAG,OAAIsB,EAAKiD,SAAS,CACzBnB,SAAS,EACTqB,cAAgBzE,GAAOA,EAAIwD,OAAS,EAAKxD,EAAI6D,OAAO,SAAAC,GAAC,OAAIxC,EAAKoD,YAAYZ,KAAM,QAvBnExC,EA2BnBoD,YAAc,SAACZ,GACb,GAAKA,EAAEjC,SAAWiC,EAAE/B,WAClB,OAAOT,EAAKqD,UAAUb,IA7BPxC,EAiCnBqD,UAAY,SAACb,GAAM,IACT3D,EAAUmB,EAAKC,MAAfpB,MACFyE,EAAOC,IAAED,KAAKzE,EAAO,SAAA2E,GAAC,OAAIA,EAAEvE,KAAOuD,EAAEvD,KAC3C,OAAIqE,GACFd,EAAExD,MAAQsE,EAAKtE,MACRwD,GAEFA,GAtCPxC,EAAKyD,MAAQ,CACXT,KAAM,GACNG,cAAe,GACfrB,SAAS,GALM9B,kFA2CA0D,GAAW,IAAAC,EAAAtD,KAAAuD,EACIvD,KAAKoD,MAA7BT,EADoBY,EACpBZ,KAAMG,EADcS,EACdT,cACd,GAAIH,EAAM,KACAnE,EAAUwB,KAAKJ,MAAfpB,MACqB6E,EAArB7E,QACUA,GAChBwB,KAAK4C,SAAS,CACZE,cAAeA,EAAc1B,IAAI,SAAAe,GAAC,OAAImB,EAAKN,UAAUb,yCAMpD,IACCtC,EAAsBG,KAAKJ,MAA3BC,kBADD2D,EAEkCxD,KAAKoD,MAAtCT,EAFDa,EAECb,KAAMG,EAFPU,EAEOV,cAAerB,EAFtB+B,EAEsB/B,QAC7B,OACEpB,EAAAC,EAAAC,cAAA,OAAKC,UAAU,gBACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,oBACbH,EAAAC,EAAAC,cAAC6B,EAAA,EAAD,CACEC,GAAG,IACH7B,UAAU,iBAEZH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,8BACbH,EAAAC,EAAAC,cAAA,SACEkD,KAAK,OACL3D,MAAO6C,EACP7B,SAAUd,KAAKT,aACfmE,YAAY,gCAIR,KAATf,IACClB,EACEpB,EAAAC,EAAAC,cAAA,OAAKC,UAAU,qCACbH,EAAAC,EAAAC,cAACmB,EAAA,EAAD,CAAMC,MAAM,UAAUC,KAAM,MAG5BvB,EAAAC,EAAAC,cAAA,OAAKC,UAAU,wBACZsC,EAAcjB,OAAS,EACtBxB,EAAAC,EAAAC,cAACuB,EAAD,CACEtD,MAAOsE,EACPjD,kBAAmBA,IAGnBQ,EAAAC,EAAAC,cAAA,KAAGC,UAAU,YAAb,uBAA6CmC,EAA7C,eAzFCzB,aCAfyC,EAAUC,cA8DDC,cA3Db,SAAAA,EAAYjE,GAAO,IAAAD,EAAA,OAAAb,OAAAyD,EAAA,EAAAzD,CAAAkB,KAAA6D,IACjBlE,EAAAb,OAAA0D,EAAA,EAAA1D,CAAAkB,KAAAlB,OAAA2D,EAAA,EAAA3D,CAAA+E,GAAAnB,KAAA1C,KAAMJ,KAWRkE,SAAW,WACT/D,IAEG3B,KAAK,SAAAI,GAAK,OAAImB,EAAKiD,SAAS,CAC3BpE,QACAiD,SAAS,OAjBI9B,EAqBnBE,kBAAoB,WAClBF,EAAKmE,YApBLnE,EAAKyD,MAAQ,CACX5E,MAAO,GACPiD,SAAS,GAJM9B,mFASjBK,KAAK8D,4CAgBE,IAAAR,EAAAtD,KAAAuD,EACoBvD,KAAKoD,MAAxB5E,EADD+E,EACC/E,MAAOiD,EADR8B,EACQ9B,QACf,OACEpB,EAAAC,EAAAC,cAACwD,EAAA,EAAD,CAAQJ,QAASA,GACftD,EAAAC,EAAAC,cAACwD,EAAA,EAAD,KACE1D,EAAAC,EAAAC,cAACwD,EAAA,EAAD,CACEC,OAAK,EACLC,KAAK,IACLC,OAAQ,SAAAtE,GAAK,OACXS,EAAAC,EAAAC,cAAC4D,EAADrF,OAAAsF,OAAA,CACE5F,MAAOA,EACPiD,QAASA,EACT5B,kBAAmByD,EAAKzD,mBACpBD,OAIVS,EAAAC,EAAAC,cAACwD,EAAA,EAAD,CACEE,KAAK,UACLC,OAAQ,SAAAtE,GAAK,OACXS,EAAAC,EAAAC,cAAC8D,EAADvF,OAAAsF,OAAA,CACE5F,MAAOA,EACPiD,QAASA,EACT5B,kBAAmByD,EAAKzD,mBACpBD,gBAlDCsB,aCKNoD,0LARX,OACEjE,EAAAC,EAAAC,cAAA,OAAKC,UAAU,OACbH,EAAAC,EAAAC,cAACgE,EAAD,cAJUC,IAAMtD,kBCCxBuD,IAASP,OAAO7D,EAAAC,EAAAC,cAACmE,EAAD,MAASC,SAASC,eAAe","file":"static/js/main.eef88bae.chunk.js","sourcesContent":["\nconst api = \"https://reactnd-books-api.udacity.com\"\n\n\n// Generate a unique token for storing your bookshelf data on the backend server.\nlet token = localStorage.token\nif (!token)\n  token = localStorage.token = Math.random().toString(36).substr(-8)\n\nconst headers = {\n  'Accept': 'application/json',\n  'Authorization': token\n}\n\nexport const get = (bookId) =>\n  fetch(`${api}/books/${bookId}`, { headers })\n    .then(res => res.json())\n    .then(data => data.book)\n\nexport const getAll = () =>\n  fetch(`${api}/books`, { headers })\n    .then(res => res.json())\n    .then(data => data.books)\n\nexport const update = (book, shelf) =>\n  fetch(`${api}/books/${book.id}`, {\n    method: 'PUT',\n    headers: {\n      ...headers,\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({ shelf })\n  }).then(res => res.json())\n\nexport const search = (query) =>\n  fetch(`${api}/search`, {\n    method: 'POST',\n    headers: {\n      ...headers,\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({ query })\n  }).then(res => res.json())\n    .then(data => data.books)\n","import React, { Component } from 'react'\nimport * as BooksAPI from '../BooksAPI'\n\nconst joinArr = (arr) => {\n  return arr.join(', ').replace(/,(?!.*,)/gmi, ' and');\n}\n\nclass Book extends Component {\n\n  handleChange = ({ target }) => {\n    const { book, handleChangeShelf } = this.props\n    const shelf = target.value;\n    BooksAPI\n      .update(book, shelf)\n      .then(() => handleChangeShelf && handleChangeShelf())\n  }\n\n  render() {\n    const { book } = this.props\n    const { title, authors, shelf = \"none\", imageLinks } = book;\n    return (\n      <div className=\"book\">\n        <div className=\"book-top\">\n          <div\n            className=\"book-cover\"\n            style={{ width: 128, height: 193, backgroundImage: `url(\"${imageLinks.thumbnail}\")` }}\n          ></div>\n          <div className=\"book-shelf-changer\">\n            <select value={shelf} onChange={this.handleChange}>\n              <option value=\"move\" disabled>Move to...</option>\n              <option value=\"currentlyReading\">Currently Reading</option>\n              <option value=\"wantToRead\">Want to Read</option>\n              <option value=\"read\">Read</option>\n              <option value=\"none\">None</option>\n            </select>\n          </div>\n        </div>\n        <div className=\"book-title\">{title}</div>\n        <div className=\"book-authors\">{joinArr(authors)}</div>\n      </div>\n    )\n  }\n}\n\nexport default Book;","import React from 'react';\nimport Book from './Book';\n\nconst BooksList = props => {\n  const { books, handleChangeShelf } = props;\n  return (\n    <ol className=\"books-grid\">\n      {books.map((book, i) => {\n        return (\n          <li key={i}>\n            <Book\n              book={book}\n              handleChangeShelf={handleChangeShelf}\n            />\n          </li>\n        )\n      })}\n    </ol>\n  );\n}\n\nexport default BooksList;","import React from 'react';\nimport BooksList from './BooksList';\nimport { Ring } from 'react-spinners-css';\n\nconst BookShelf = props => {\n  const { title, books, loading, handleChangeShelf } = props;\n  return (\n    <div className=\"bookshelf\">\n      <h2 className=\"bookshelf-title\">{title}</h2>\n      <div className=\"bookshelf-books\">\n        {loading ? (\n          <Ring color=\"#2e7c31\" size={70} />\n        ) : (\n            books.length > 0 ? (\n              <BooksList\n                books={books}\n                handleChangeShelf={handleChangeShelf}\n              />\n            ) : (\n                <p className=\"no-found\">You don't have any book in this shelf.</p>\n              )\n          )}\n      </div>\n    </div>\n  );\n}\n\nexport default BookShelf;","import React from 'react'\nimport BookShelf from '../BookShelf';\nimport { Link } from 'react-router-dom';\n\nconst shelves = [\n  {\n    key: \"currentlyReading\",\n    title: \"Currently Reading\",\n  },\n  {\n    key: \"wantToRead\",\n    title: \"Want to Read\",\n  },\n  {\n    key: \"read\",\n    title: \"Read\",\n  },\n];\n\nconst Home = props => {\n  const { books, loading, handleChangeShelf } = props;\n  return (\n    <div className=\"list-books\">\n      <div className=\"list-books-title\">\n        <h1>MyReads</h1>\n      </div>\n      <div className=\"list-books-content\">\n        <div>\n          {shelves.map(shelf => (\n            <BookShelf\n              key={shelf.key}\n              loading={loading}\n              title={shelf.title}\n              handleChangeShelf={handleChangeShelf}\n              books={books.filter(v => v.shelf === shelf.key)}\n            />\n          ))}\n        </div>\n      </div>\n      <div className=\"open-search-wrapper\">\n        <Link\n          to='/search'\n          className=\"open-search\"\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default Home;","import React, { Component } from 'react'\nimport _ from 'lodash';\nimport BooksList from '../BooksList';\nimport { Link } from 'react-router-dom';\nimport { Ring } from 'react-spinners-css';\nimport * as BooksAPI from '../../BooksAPI';\n\nclass Search extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      text: \"\",\n      searchedBooks: [],\n      loading: false,\n    };\n  }\n\n  handleChange = ({ target }) => {\n    const text = target.value;\n    this.setState({ text });\n    if (text) {\n      this.searchBooks(text);\n    }\n  }\n\n  searchBooks = (text) => {\n    this.setState({ loading: true })\n    BooksAPI\n      .search(text)\n      .then(res => this.setState({\n        loading: false,\n        searchedBooks: (res && res.length > 0) ? res.filter(v => this.filterBooks(v)) : [],\n      }));\n  }\n\n  filterBooks = (v) => {\n    if ((v.authors && v.imageLinks)) {\n      return this.markShelf(v);\n    }\n  }\n\n  markShelf = (v) => {\n    const { books } = this.props\n    const find = _.find(books, o => o.id === v.id);\n    if (find) {\n      v.shelf = find.shelf;\n      return v;\n    }\n    return v;\n  }\n\n  componentDidUpdate(prevProps) {\n    const { text, searchedBooks } = this.state;\n    if (text) {\n      const { books } = this.props;\n      const { books: prevBooks } = prevProps;\n      if (prevBooks !== books) {\n        this.setState({\n          searchedBooks: searchedBooks.map(v => this.markShelf(v))\n        });\n      }\n    }\n  }\n\n  render() {\n    const { handleChangeShelf } = this.props;\n    const { text, searchedBooks, loading } = this.state;\n    return (\n      <div className=\"search-books\">\n        <div className=\"search-books-bar\">\n          <Link\n            to='/'\n            className=\"close-search\"\n          />\n          <div className=\"search-books-input-wrapper\">\n            <input\n              type=\"text\"\n              value={text}\n              onChange={this.handleChange}\n              placeholder=\"Search by title or author\"\n            />\n          </div>\n        </div>\n        {text !== \"\" && (\n          loading ? (\n            <div className=\"search-books-results align-center\">\n              <Ring color=\"#2e7c31\" size={70} />\n            </div>\n          ) : (\n              <div className=\"search-books-results\">\n                {searchedBooks.length > 0 ? (\n                  <BooksList\n                    books={searchedBooks}\n                    handleChangeShelf={handleChangeShelf}\n                  />\n                ) : (\n                    <p className=\"no-found\">No search found of \"{text}\"</p>\n                  )}\n              </div>\n            )\n        )}\n      </div>\n    );\n  }\n}\n\nexport default Search;","import React, { Component } from \"react\";\nimport { createBrowserHistory } from \"history\";\nimport { Router, Route, Switch } from \"react-router-dom\";\nimport Home from \"../components/Home\";\nimport Search from \"../components/Search\";\nimport * as BooksAPI from '../BooksAPI';\n\nconst history = createBrowserHistory();\n\nclass Routes extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      books: [],\n      loading: true,\n    }\n  }\n\n  componentDidMount() {\n    this.getBooks();\n  }\n\n  getBooks = () => {\n    BooksAPI\n      .getAll()\n      .then(books => this.setState({\n        books,\n        loading: false\n      }))\n  }\n\n  handleChangeShelf = () => {\n    this.getBooks();\n  }\n\n  render() {\n    const { books, loading } = this.state\n    return (\n      <Router history={history}>\n        <Switch>\n          <Route\n            exact\n            path=\"/\"\n            render={props => (\n              <Home\n                books={books}\n                loading={loading}\n                handleChangeShelf={this.handleChangeShelf}\n                {...props}\n              />\n            )}\n          />\n          <Route\n            path=\"/search\"\n            render={props => (\n              <Search\n                books={books}\n                loading={loading}\n                handleChangeShelf={this.handleChangeShelf}\n                {...props}\n              />\n            )}\n          />\n        </Switch>\n      </Router>\n    )\n  }\n}\n\nexport default Routes;","import React from 'react';\nimport Routes from './routes';\nimport './App.css';\n\nclass App extends React.Component {\n  render() {\n    return (\n      <div className=\"app\">\n        <Routes />\n      </div>\n    )\n  }\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}